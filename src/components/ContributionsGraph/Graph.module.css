@reference "../../styles/globals.css";

.graph {
  --week-width: calc(var(--block-size, 10px) + var(--block-gap, 3px));

  @apply text-xs gap-1;

  display: inline-grid;
  grid-template-areas:
    'null months'
    'days blocks';
  grid-template-columns: auto 1fr;
}

.months {
  display: grid;
  grid-area: months;
  grid-template-columns:
    calc(var(--week-width) * 5) /* Jan */
    calc(var(--week-width) * 4) /* Feb */
    calc(var(--week-width) * 4) /* Mar */
    calc(var(--week-width) * 5) /* Apr */
    calc(var(--week-width) * 4) /* May */
    calc(var(--week-width) * 4) /* Jun */
    calc(var(--week-width) * 5) /* Jul */
    calc(var(--week-width) * 4) /* Aug */
    calc(var(--week-width) * 4) /* Sep */
    calc(var(--week-width) * 5) /* Oct */
    calc(var(--week-width) * 4) /* Nov */
    calc(var(--week-width) * 5) /* Dec */;
}

.days {
  display: grid;
  grid-area: days;
  grid-template-rows: repeat(7, var(--block-size, 10px));
  gap: var(--block-gap, 3px);
}

.months,
.days {
  opacity: 0.5;
}

/* Legend */
.legend li {
  border-radius: var(--block-round, 2px);

  &[data-level='0'] {
    background-color: var(--level-0, #ebedf0);
  }

  &[data-level='1'] {
    background-color: var(--level-1, #9be9a8);
  }

  &[data-level='2'] {
    background-color: var(--level-2, #40c463);
  }

  &[data-level='3'] {
    background-color: var(--level-3, #30a14e);
  }

  &[data-level='4'] {
    background-color: var(--level-4, #216e39);
  }
}

.days li {
  display: inline-flex;
  align-items: center;
}

.days li:nth-child(odd) {
  visibility: hidden;
}

/* SVG Blocks */
.svgBlocks {
  grid-area: blocks;
  width: calc((var(--block-size, 10px) + var(--block-gap, 3px)) * 53 - var(--block-gap, 3px));
  height: calc((var(--block-size, 10px) + var(--block-gap, 3px)) * 7 - var(--block-gap, 3px));
}

.svgBlocks rect {
  transition: opacity 0.15s ease;
}

.svgBlocks rect[data-level='-1'] {
  visibility: hidden;
}

.svgBlocks rect[data-level='0'] {
  fill: var(--level-0, #ebedf0);
}

.svgBlocks rect[data-level='1'] {
  fill: var(--level-1, #9be9a8);
}

.svgBlocks rect[data-level='2'] {
  fill: var(--level-2, #40c463);
}

.svgBlocks rect[data-level='3'] {
  fill: var(--level-3, #30a14e);
}

.svgBlocks rect[data-level='4'] {
  fill: var(--level-4, #216e39);
}

.svgRect {
  opacity: 1;
}

.svgRect.dimmed {
  opacity: 0.15;
}

.svgRect.highlighted {
  opacity: 1;
}
